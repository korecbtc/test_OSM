{"name": "Search_by_structured_params", "status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'response' referenced before assignment", "trace": "data_structured = ['Lloyd Street 2728', 'New York', 'Brooklyn Community District 17', 'New York', 'United States', '11226', ...]\n\n    @allure.title(\"Search_by_structured_params\")\n    @pytest.mark.parametrize('data_structured', data_structured)\n    def test_search_by_params(data_structured):\n        '''Проверка эндпоинта search со структурировынным запросом'''\n        params = {\n            'street': data_structured[0],\n            'city': data_structured[1],\n            'county': data_structured[2],\n            'state': data_structured[3],\n            'country': data_structured[4],\n            'postalcode': data_structured[5],\n            'format': 'json'\n        }\n        try:\n            response = connection(TESTED_URL, params)\n        except ConnectionError as error:\n            logger.error(error)\n        with allure.step(\"Проверяю, что широта соответствует ожидаемой\"):\n>           assert round(\n                float(response.json()[0]['lat']), ROUND_LEVEL\n                ) == round(float(data_structured[6]), ROUND_LEVEL)\nE           UnboundLocalError: local variable 'response' referenced before assignment\n\ntest_OSM.py:73: UnboundLocalError"}, "description": "Проверка эндпоинта search со структурировынным запросом", "steps": [{"name": "Connection to server", "status": "broken", "statusDetails": {"message": "requests.exceptions.ConnectionError: HTTPSConnectionPool(host='nodgminatim.openstreetmap.org', port=443): Max retries exceeded with url: /search?street=Lloyd+Street+2728&city=New+York&county=Brooklyn+Community+District+17&state=New+York&country=United+States&postalcode=11226&format=json (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x0000029534E33BE0>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed'))\n", "trace": "  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"C:\\dev\\test_OSM\\test_OSM.py\", line 28, in connection\n    response = get(tested_url, params=params)\n  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\requests\\api.py\", line 73, in get\n    return request(\"get\", url, params=params, **kwargs)\n  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\requests\\api.py\", line 59, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\requests\\sessions.py\", line 587, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\requests\\sessions.py\", line 701, in send\n    r = adapter.send(request, **kwargs)\n  File \"c:\\dev\\test_osm\\venv\\lib\\site-packages\\requests\\adapters.py\", line 565, in send\n    raise ConnectionError(e, request=request)\n"}, "parameters": [{"name": "tested_url", "value": "'https://nodgminatim.openstreetmap.org/search'"}, {"name": "params", "value": "{'street': 'Lloyd Street 2728', 'city': 'New York', 'county': 'Brooklyn Community District 17', 'state': 'New York', 'country': 'United States', 'postalcode': '11226', 'format': 'json'}"}], "start": 1682510188731, "stop": 1682510188734}, {"name": "Проверяю, что широта соответствует ожидаемой", "status": "broken", "statusDetails": {"message": "UnboundLocalError: local variable 'response' referenced before assignment\n", "trace": "  File \"C:\\dev\\test_OSM\\test_OSM.py\", line 73, in test_search_by_params\n    assert round(\n"}, "start": 1682510188737, "stop": 1682510188737}], "attachments": [{"name": "log", "source": "6e390329-f671-4108-bc85-b3760838162b-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "data_structured", "value": "['Lloyd Street 2728', 'New York', 'Brooklyn Community District 17', 'New York', 'United States', '11226', '40.650588', '-73.951475']"}], "start": 1682510188731, "stop": 1682510188738, "uuid": "d005eaf0-d1fe-4bb7-9142-590ff82e0a04", "historyId": "36cad28100ea77981e83f704e4f44228", "testCaseId": "d1c8003b30a298d9b0cc44b7ffce3589", "fullName": "test_OSM#test_search_by_params", "labels": [{"name": "suite", "value": "test_OSM"}, {"name": "host", "value": "DESKTOP-NTU09GJ"}, {"name": "thread", "value": "4072-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_OSM"}]}